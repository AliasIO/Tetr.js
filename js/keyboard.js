(function(e,t){var n=[],r={},i;typeof define=="function"&&define.amd?define(function(){return t("amd")}):(i=t("global"),i.noConflict=function(){var t,s;newNamespaces=Array.prototype.slice.apply(arguments);for(s=0;s<n.length;s+=1)typeof r[n[s]]=="undefined"?delete e[n[s]]:e[n[s]]=r[n[s]];r={};for(s=0;s<newNamespaces.length;s+=1){if(typeof newNamespaces[s]!="string")throw new Error("Cannot replace namespaces. All new namespaces must be strings.");r[newNamespaces[s]]=e[newNamespaces[s]],e[newNamespaces[s]]=i}return n=newNamespaces,n},i.noConflict("KeyboardJS","k"))})(this,function(e){function l(e){var t,n;t=p(e.keyCode);if(t.length<1)return;for(n=0;n<t.length;n+=1)A(t[n]);m(),E(e)}function c(e){var t,n;t=p(e.keyCode);if(t.length<1)return;for(n=0;n<t.length;n+=1)O(t[n]);g(),S(e)}function h(e){o=[],g(),S(e)}function p(e){return i[e]||[]}function d(e,t){if(typeof e!="string"&&(typeof e!="object"||typeof e.push!="function"))throw new Error("Cannot create macro. The combo must be a string or array.");if(typeof t!="object"||typeof t.push!="function")throw new Error("Cannot create macro. The injectedKeys must be an array.");marcos.push([e,injectKeys])}function v(e){var t;if(typeof e!="string"&&(typeof e!="object"||typeof e.push!="function"))throw new Error("Cannot remove macro. The combo must be a string or array.");for(mI=0;mI<s.length;mI+=1){t=s[mI];if(x(e,t[0])){O(t[1]),s.splice(mI,1);break}}}function m(){var e,t,n;for(e=0;e<s.length;e+=1){t=C(s[e][0]);if(f.indexOf(s[e])===-1&&T(t)){f.push(s[e]);for(n=0;n<s[e][1].length;n+=1)A(s[e][1][n])}}}function g(){var e,t,n;for(e=0;e<f.length;e+=1){t=C(f[e][0]);if(T(t)===!1){for(n=0;n<f[e][1].length;n+=1)O(f[e][1][n]);f.splice(e,1),e-=1}}}function y(e,t,n){function s(){u.splice(u.indexOf(r),1)}function o(e){function i(){var n;for(n=0;n<t.length;n+=1)typeof t[n]=="function"&&(e==="keyup"?r.keyUpCallback.splice(r.keyUpCallback.indexOf(t[n]),1):r.keyDownCallback.splice(r.keyDownCallback.indexOf(t[n]),1))}var t,n;console.log(e);if(typeof e!="string")throw new Error("Cannot bind callback. The event name must be a string.");if(e!=="keyup"&&e!=="keydown")throw new Error('Cannot bind callback. The event name must be a "keyup" or "keydown".');t=Array.prototype.slice.apply(arguments,[1]);for(n=0;n<t.length;n+=1)typeof t[n]=="function"&&(e==="keyup"?r.keyUpCallback.push(t[n]):r.keyDownCallback.push(t[n]));return{clear:i}}var r={},i={};typeof e=="object"&&typeof e.push=="function"&&(e=k(e)),typeof e=="function"&&(e=!1,n=t,t=e);if(e!==!1&&typeof e!="string")throw new Error("Failed to bind key combo. The key combo must be string.");return r.keyCombo=e,r.keyDownCallback=[],r.keyUpCallback=[],t&&r.keyDownCallback.push(t),n&&r.keyUpCallback.push(n),u.push(r),{clear:s,on:o}}function b(e){var t,n,r;for(t=0;t<u.length;t+=1)n=u[bi],x(e,n.keyCombo)&&(u.splice(t,1),t-=1)}function w(e){var t,n,r;for(t=0;t<u.length;t+=1){r=u[bi];for(n=0;n<r.keyCombo.length;n+=1)if(r.keyCombo[kI].indexOf(e)>-1){u.splice(t,1),t-=1;break}}}function E(e){var t,n,r,i,s,f,l,c,h,p,d=[],v;s=[].concat(o);for(t=0;t<u.length;t+=1)v=N(u[t].keyCombo).length,d[v]||(d[v]=[]),d[v].push(u[t]);for(n=d.length-1;n>=0;n-=1){if(!d[n])continue;for(t=0;t<d[n].length;t+=1){r=d[n][t],bindingKeys=N(r.keyCombo),h=!0;for(c=0;c<bindingKeys.length;c+=1)if(s.indexOf(bindingKeys[c])===-1){h=!1;break}if(h&&T(r.keyCombo)){a.push(r);for(c=0;c<bindingKeys.length;c+=1)p=s.indexOf(bindingKeys[c]),p>-1&&(s.splice(p,1),c-=1);for(f=0;f<r.keyDownCallback.length;f+=1)r.keyDownCallback[f](e)===!1&&(l=!0);l===!0&&(e.preventDefault(),e.stopPropagation())}}}}function S(e){var t,n,r,i;for(t=0;t<a.length;t+=1){r=a[t];if(T(r.keyCombo)===!1){for(n=0;n<r.keyUpCallback.length;n+=1)r.keyUpCallback[n](e)===!1&&(i=!0);i===!0&&(e.preventDefault(),e.stopPropagation()),a.splice(t,1),t-=1}}}function x(e,t){var n,r,i;e=C(e),t=C(t);if(e.length!==t.length)return!1;for(n=0;n<e.length;n+=1){if(e[aI].length!==t[aI].length)return!1;for(r=0;r<e[aI].length;r+=1){if(e[aI][r].length!==t[aI][r].length)return!1;for(i=0;i<e[aI][r].length;i+=1)if(t[aI][r].indexOf(e[aI][r][i])===-1)return!1}}return!0}function T(e){var t,n,r,i,s=0,u;e=C(e);for(t=0;t<e.length;t+=1)for(n=0;n<e[t].length;n+=1){r=[].concat(e[t][n]);for(i=s;i<o.length;i+=1)u=r.indexOf(o[i]),u>-1&&(r.splice(u,1),s=i);if(r.length!==0)return!1}return!0}function N(e){var t,n,r,i=[];e=C(e);for(t=0;t<e.length;t+=1)for(n=0;n<e[t].length;n+=1)i=i.concat(e[t][n]);return i}function C(e){var t=e,n=0,r=0,i=!1,s=!1,o=[],u=[],a=[],f="";if(typeof e=="object"&&typeof e.push=="function")return e;if(typeof e!="string")throw new Error('Cannot parse "keyCombo" because its type is "'+typeof e+'". It must be a "string".');while(t.charAt(n)===" ")n+=1;for(;;){if(t.charAt(n)===" "){while(t.charAt(n)===" ")n+=1;i=!0}else if(t.charAt(n)===","){if(r||s)throw new Error("Failed to parse key combo. Unexpected , at character index "+n+".");s=!0,n+=1}else if(t.charAt(n)==="+"){f.length&&(a.push(f),f="");if(r||s)throw new Error("Failed to parse key combo. Unexpected + at character index "+n+".");r=!0,n+=1}else if(t.charAt(n)===">"){f.length&&(a.push(f),f=""),a.length&&(u.push(a),a=[]);if(r||s)throw new Error("Failed to parse key combo. Unexpected > at character index "+n+".");r=!0,n+=1}else if(n<t.length-1&&t.charAt(n)==="!"&&(t.charAt(n+1)===">"||t.charAt(n+1)===","||t.charAt(n+1)==="+"))f+=t.charAt(n+1),r=!1,i=!1,s=!1,n+=2;else{if(!(n<t.length&&t.charAt(n)!=="+"&&t.charAt(n)!==">"&&t.charAt(n)!==","&&t.charAt(n)!==" ")){n+=1;continue}if(r===!1&&i===!0||s===!0)f.length&&(a.push(f),f=""),a.length&&(u.push(a),a=[]),u.length&&(o.push(u),u=[]);r=!1,i=!1,s=!1;while(n<t.length&&t.charAt(n)!=="+"&&t.charAt(n)!==">"&&t.charAt(n)!==","&&t.charAt(n)!==" ")f+=t.charAt(n),n+=1}if(n>=t.length){f.length&&(a.push(f),f=""),a.length&&(u.push(a),a=[]),u.length&&(o.push(u),u=[]);break}}return o}function k(e){var t,n,r=[];if(typeof e=="string")return e;if(typeof e!="object"||typeof e.push!="function")throw new Error("Cannot stringify key combo.");for(t=0;t<e.length;t+=1){r[t]=[];for(n=0;n<e[t].length;n+=1)r[t][n]=e[t][n].join(" + ");r[t]=r[t].join(" > ")}return r.join(" ")}function L(){return[].concat(o)}function A(e){if(e.match(/\s/))throw new Error("Cannot add key name "+e+" to active keys because it contains whitespace.");if(o.indexOf(e)>-1)return;o.push(e)}function O(e){o.splice(o.indexOf(e),1)}function M(e,t){if(typeof e!="string")throw new Error("Cannot register new locale. The locale name must be a string.");if(typeof t!="object")throw new Error("Cannot register "+e+" locale. The locale map must be an object.");if(typeof t.keys!="object"||typeof t.keys.push!="function"||typeof t.map!="object"||typeof t.map!="function")throw new Error("Cannot register "+e+" locale. The locale map is invalid.");n[e]=t}function _(e){if(!e){if(typeof e!="string")throw new Error("Cannot set locale. The locale name must be a string.");if(!n[e])throw new Error("Cannot set locale to "+e+" because it does not exist. If you would like to submit a "+e+" locale map for KeyboardJS please submit it at https://github.com/RobertWHurst/KeyboardJS/issues.");r=e,i=n[r].map,s=n[r].macros}return r}var t={},n,r,i,s,o=[],u=[],a=[],f=[];[].indexOf||(Array.prototype.indexOf=function(e,t,n){for(n=this.length,t=(n+~~t)%n;t<n&&(!(t in this)||this[t]!==e);t++);return t^n?t:-1}),n={us:{map:{3:["cancel"],8:["backspace"],9:["tab"],12:["clear"],13:["enter"],16:["shift"],17:["ctrl"],18:["alt","menu"],19:["pause","break"],20:["capslock"],27:["escape","esc"],32:["space","spacebar"],33:["pageup"],34:["pagedown"],35:["end"],36:["home"],37:["left"],38:["up"],39:["right"],40:["down"],41:["select"],42:["printscreen"],43:["execute"],44:["snapshot"],45:["insert","ins"],46:["delete","del"],47:["help"],91:["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"],92:["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"],145:["scrolllock","scroll"],186:["semicolon",";"],187:["equal","equalsign","="],188:["comma",","],189:["dash","-"],190:["period","."],191:["slash","forwardslash","/"],192:["graveaccent","`"],219:["openbracket","["],220:["backslash","\\"],221:["closebracket","]"],222:["apostrophe","'"],65:["a"],66:["b"],67:["c"],68:["d"],69:["e"],70:["f"],71:["g"],72:["h"],73:["i"],74:["j"],75:["k"],76:["l"],77:["m"],78:["n"],79:["o"],80:["p"],81:["q"],82:["r"],83:["s"],84:["t"],85:["u"],86:["v"],87:["w"],88:["x"],89:["y"],90:["z"],48:["zero","0"],49:["one","1"],50:["two","2"],51:["three","3"],52:["four","4"],53:["five","5"],54:["six","6"],55:["seven","7"],56:["eight","8"],57:["nine","9"],96:["numzero","num0"],97:["numone","num1"],98:["numtwo","num2"],99:["numthree","num3"],100:["numfour","num4"],101:["numfive","num5"],102:["numsix","num6"],103:["numseven","num7"],104:["numeight","num8"],105:["numnine","num9"],106:["nummultiply","num*"],107:["numadd","num+"],108:["numenter"],109:["numsubtract","num-"],110:["numdecimal","num."],111:["numdevide","num/"],144:["numlock","num"],112:["f1"],113:["f2"],114:["f3"],115:["f4"],116:["f5"],117:["f6"],118:["f7"],119:["f8"],120:["f9"],121:["f10"],122:["f11"],123:["f12"]},macros:[[[[["shift","graveaccent"]]],["tilde","~"]],[[[["shift","one"]]],["exclamation","exclamationpoint","!"]],[[[["shift","two"]]],["at","@"]],[[[["shift","three"]]],["number","#"]],[[[["shift","four"]]],["dollar","dollars","dollarsign","$"]],[[[["shift","five"]]],["percent","%"]],[[[["shift","six"]]],["caret","^"]],[[[["shift","seven"]]],["ampersand","and","&"]],[[[["shift","eight"]]],["asterisk","*"]],[[[["shift","nine"]]],["openparen","("]],[[[["shift","zero"]]],["closeparen",")"]],[[[["shift","dash"]]],["underscore","_"]],[[[["shift","equal"]]],["plus","+"]],[[[["shift","openbracket"]]],["opencurlybrace","opencurlybracket","{"]],[[[["shift","closebracket"]]],["closecurlybrace","closecurlybracket","}"]],[[[["shift","backslash"]]],["verticalbar","|"]],[[[["shift","semicolon"]]],["colon",":"]],[[[["shift","apostrophe"]]],["quotationmark",'"']],[[[["shift","comma"]]],["openanglebracket","<"]],[[[["shift","period"]]],["closeanglebracket",">"]],[[[["shift","forwardslash"]]],["questionmark","?"]],[[[["shift","a"]]],["A"]],[[[["shift","b"]]],["B"]],[[[["shift","c"]]],["C"]],[[[["shift","d"]]],["D"]],[[[["shift","e"]]],["E"]],[[[["shift","f"]]],["F"]],[[[["shift","g"]]],["G"]],[[[["shift","h"]]],["H"]],[[[["shift","i"]]],["I"]],[[[["shift","j"]]],["J"]],[[[["shift","k"]]],["K"]],[[[["shift","l"]]],["L"]],[[[["shift","m"]]],["M"]],[[[["shift","n"]]],["N"]],[[[["shift","o"]]],["O"]],[[[["shift","p"]]],["P"]],[[[["shift","q"]]],["Q"]],[[[["shift","r"]]],["R"]],[[[["shift","s"]]],["S"]],[[[["shift","t"]]],["T"]],[[[["shift","u"]]],["U"]],[[[["shift","v"]]],["V"]],[[[["shift","w"]]],["W"]],[[[["shift","x"]]],["X"]],[[[["shift","y"]]],["Y"]],[[[["shift","z"]]],["Z"]]]}},r="us",i=n[r].map,s=n[r].macros;if(window.addEventListener)window.addEventListener("keydown",l,!1),window.addEventListener("keyup",c,!1),window.addEventListener("onblur",h,!1);else{if(!window.attachEvent)throw new Error("Cannot bind to keydown event. Both addEventListener and attachEvent are unsupported by your browser.");window.attachEvent("onkeydown",l),window.attachEvent("onkeyup",c),window.attachEvent("onblur",h)}return t.on=y,t.clear=b,t.clear.key=w,t.locale=_,t.locale.register=M,t.macro=d,t.macro.remove=v,t.getKey=p,t.combo={},t.parse=C,t.stringify=k,window.map=i,window.macros=s,t})
